<h1>ダッシュボード</h1>

<div class="dashboard-component" id="weekBar">
    <canvas id="expenseByWeekBarChart"></canvas>
</div>

<div class="dashboard-component" id="weekBar">
    <canvas id="expenseBarChart"></canvas>
</div>
<canvas id="expensePieChart" width="400" height="400"></canvas>
<script>

weekPrices = [];
date = gon.week;

gon.date_purchase.forEach(d => {if (d == null) {weekPrices.push(0)} else {weekPrices.push(d.total_cost)}});


barChartName = document.getElementById('expenseByWeekBarChart');
batChart = new Chart(barChartName, {
    type: 'bar',
    data: {
        labels: date,
        datasets: [{
            label: '1週間の支出金額',
            data: weekPrices,
            backgroundColor: 
                'rgba(255, 99, 132, 0.2)'
            ,
            borderColor: 
                'rgba(255, 99, 132, 1)'
            ,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});

productCategoryCost = []
productCategoryName = []

gon.product.forEach(d => { productCategoryCost.push(d.total_cost); productCategoryName.push(d.name);});

pieChartName = document.getElementById('expensePieChart');
pieChart = new Chart(pieChartName, {
    type: 'pie',
    data: {
        labels: productCategoryName,
        datasets: [{
            label: '1週間の支出種類',
            data: productCategoryCost,
            backgroundColor: [
            'rgba(255, 99, 132, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [             
            'rgba(255, 99, 132, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)'
            ],
            borderWidth: 1
        }]
    },
    options: {


    }
});
</script>